@model CMCS.Web.Models.Lecturer
@{
	ViewData["Title"] = "Lecturer Details - " + Model.FullName;
}

<div class="row">
	<div class="col-lg-10 mx-auto">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<div>
				<h1 class="mb-1">@Model.FullName</h1>
				<p class="text-muted mb-0">Lecturer ID: #@Model.Id | Employee #: @Model.EmployeeNumber</p>
			</div>
			<div>
				<a asp-action="Lecturers" class="btn btn-outline-secondary me-2">‚Üê Back to List</a>
				<a asp-action="EditLecturer" asp-route-id="@Model.Id" class="btn btn-primary">
					<i class="bi bi-pencil"></i> Edit Information
				</a>
			</div>
		</div>

		<!-- Personal Information -->
		<div class="card border-0 shadow-sm mb-3">
			<div class="card-header bg-primary text-white">
				<h5 class="card-title mb-0"><i class="bi bi-person-badge"></i> Personal Information</h5>
			</div>
			<div class="card-body">
				<div class="row g-4">
					<div class="col-md-6">
						<div class="border-start border-primary border-4 ps-3 mb-3">
							<small class="text-muted d-block">Full Name</small>
							<h6 class="mb-0">@Model.FullName</h6>
						</div>
						<div class="border-start border-primary border-4 ps-3 mb-3">
							<small class="text-muted d-block">Email Address</small>
							<h6 class="mb-0">@Model.Email</h6>
						</div>
						<div class="border-start border-primary border-4 ps-3">
							<small class="text-muted d-block">Phone Number</small>
							<h6 class="mb-0">@Model.PhoneNumber</h6>
						</div>
					</div>
					<div class="col-md-6">
						<div class="border-start border-primary border-4 ps-3 mb-3">
							<small class="text-muted d-block">Department</small>
							<h6 class="mb-0">@Model.Department</h6>
						</div>
						<div class="border-start border-primary border-4 ps-3 mb-3">
							<small class="text-muted d-block">Employee Number</small>
							<h6 class="mb-0">@Model.EmployeeNumber</h6>
						</div>
						<div class="border-start border-primary border-4 ps-3">
							<small class="text-muted d-block">Status</small>
							<h6 class="mb-0">
								@if (Model.IsActive)
								{
									<span class="badge bg-success">Active</span>
								}
								else
								{
									<span class="badge bg-secondary">Inactive</span>
								}
							</h6>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Banking Information -->
		<div class="card border-0 shadow-sm mb-3">
			<div class="card-header bg-success text-white">
				<h5 class="card-title mb-0"><i class="bi bi-bank"></i> Banking Information</h5>
			</div>
			<div class="card-body">
				<div class="row g-4">
					<div class="col-md-4">
						<div class="border-start border-success border-4 ps-3">
							<small class="text-muted d-block">Bank Name</small>
							<h6 class="mb-0">@Model.BankName</h6>
						</div>
					</div>
					<div class="col-md-4">
						<div class="border-start border-success border-4 ps-3">
							<small class="text-muted d-block">Account Number</small>
							<h6 class="mb-0">@Model.AccountNumber</h6>
						</div>
					</div>
					<div class="col-md-4">
						<div class="border-start border-success border-4 ps-3">
							<small class="text-muted d-block">Tax Number</small>
							<h6 class="mb-0">@Model.TaxNumber</h6>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Payment Information -->
		<div class="card border-0 shadow-sm mb-3">
			<div class="card-header bg-info text-white">
				<h5 class="card-title mb-0"><i class="bi bi-currency-dollar"></i> Payment Information</h5>
			</div>
			<div class="card-body">
				<div class="border-start border-info border-4 ps-3">
					<small class="text-muted d-block">Default Hourly Rate</small>
					<h4 class="mb-0 text-success">R @Model.DefaultHourlyRate.ToString("N2")</h4>
				</div>
			</div>
		</div>

		<!-- Claims History -->
		<div class="card border-0 shadow-sm">
			<div class="card-header bg-warning">
				<h5 class="card-title mb-0"><i class="bi bi-clock-history"></i> Claims History</h5>
			</div>
			<div class="card-body p-0">
				@if (ViewBag.Claims != null && ((List<CMCS.Web.Models.Claim>)ViewBag.Claims).Any())
				{
					<div class="table-responsive">
						<table class="table table-hover mb-0">
							<thead class="table-light">
								<tr>
									<th>Claim #</th>
									<th>Period</th>
									<th class="text-end">Hours</th>
									<th class="text-end">Rate</th>
									<th class="text-end">Amount</th>
									<th class="text-center">Status</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var claim in (List<CMCS.Web.Models.Claim>)ViewBag.Claims)
								{
									var monthName = new DateTime(claim.Year, claim.Month, 1).ToString("MMM yyyy");
									var statusClass = claim.Status switch
									{
										CMCS.Web.Models.ClaimStatus.Submitted => "bg-primary",
										CMCS.Web.Models.ClaimStatus.Verified => "bg-info",
										CMCS.Web.Models.ClaimStatus.Approved => "bg-success",
										CMCS.Web.Models.ClaimStatus.Rejected => "bg-danger",
										CMCS.Web.Models.ClaimStatus.Settled => "bg-dark",
										_ => "bg-secondary"
									};

									<tr>
										<td>#@claim.Id</td>
										<td>@monthName</td>
										<td class="text-end">@claim.TotalHours.ToString("N2")</td>
										<td class="text-end">R @claim.HourlyRate.ToString("N2")</td>
										<td class="text-end fw-semibold">R @claim.Amount.ToString("N2")</td>
										<td class="text-center"><span class="badge @statusClass">@claim.Status</span></td>
									</tr>
								}
							</tbody>
						</table>
					</div>
				}
				else
				{
					<div class="p-4 text-center text-muted">
						<p class="mb-0">No claims submitted yet.</p>
					</div>
				}
			</div>
		</div>
	</div>
</div>

